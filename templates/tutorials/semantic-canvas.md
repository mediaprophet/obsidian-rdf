# Semantic Canvas Mode in Semantic Weaver

Semantic Canvas Mode in **Semantic Weaver** transforms Obsidian's Canvas feature into a powerful tool for modeling RDF-based ontologies and knowledge graphs. This tutorial guides you through enabling Semantic Canvas Mode, creating semantic nodes and edges, running SPARQL queries, and exporting RDF data.

## Enabling Semantic Canvas Mode

1. Open Obsidian and navigate to **Settings > Community Plugins**.
2. Ensure **Semantic Weaver** is enabled.
3. Go to **Settings > Semantic Weaver Settings**.
4. Toggle **Semantic Canvas Mode** to **On**.
   - A notice will confirm: "Semantic Canvas Mode enabled by Semantic Weaver."

## Creating a Semantic Canvas

1. Create a new canvas:
   - Click **File > New Canvas** or use the command palette (`Ctrl/Cmd + P`) and select **Create new canvas**.
2. Add nodes to the canvas by dragging files, text, or media, or by clicking the canvas and selecting **Add node**.
3. Add edges by clicking and dragging between nodes to create connections.

## Editing Semantic Nodes

1. Right-click a node on the canvas and select **Edit Semantic Node**.
2. In the **Semantic Weaver: Edit Semantic Canvas Node** modal:
   - Enter the **Node ID** (e.g., `node_123`, typically auto-generated by Obsidian).
   - Select an **RDF Type** (e.g., `owl:Class`, `owl:NamedIndividual`, `rdfs:Resource`).
   - Add custom properties (e.g., `rdfs:label: "MyClass"`, `ex:description: "A sample class"`).
   - Click **Add Property** to include each property.
   - Click **Save** to store the node’s RDF data in the plugin’s quadstore.
3. A notice will confirm: "Semantic node updated by Semantic Weaver."

## Editing Semantic Edges

1. Right-click an edge on the canvas and select **Edit Semantic Edge**.
2. In the **Semantic Weaver: Edit Semantic Canvas Edge** modal:
   - Enter the **Edge ID** (e.g., `edge_123`, auto-generated by Obsidian).
   - Select a **Predicate** (e.g., `rdfs:subClassOf`, `owl:sameAs`, `skos:related`) or choose **Custom Predicate** and enter a URI (e.g., `http://example.org/customPredicate`).
   - Click **Save** to store the edge’s RDF data.
3. A notice will confirm: "Semantic edge updated by Semantic Weaver."

## Running SPARQL Queries

1. Right-click the canvas and select **Run SPARQL Query**.
2. In the **Semantic Weaver: Run SPARQL Query on Canvas** modal:
   - Enter a SPARQL query, e.g.:
     ```sparql
     SELECT ?s ?p ?o WHERE { ?s ?p ?o }
     ```
   - Click **Run Query** to execute the query against the canvas’s RDF data.
3. Results are displayed as a JSON string in a notice (e.g., "Query results: [...]").
   - For advanced visualization, integrate results with the RDF Graph View (see [RDF Graph Visualization](rdf-graph.md)).

## Exporting RDF Data

1. Open the command palette (`Ctrl/Cmd + P`) and select **Semantic Weaver: Export RDF Docs for MkDocs**.
2. In the **Semantic Weaver: Export RDF Docs Configuration** modal:
   - Configure the **Local Export Directory** (e.g., `~/my-docs`).
   - Set the **GitHub Repository** and **GitHub Pages URL** for deployment (optional).
   - If Solid Pod support is installed, enter a **Solid Pod URL** (e.g., `https://joep.inrupt.net/`) and select **Solid** as the provider.
   - Toggle **Include Test Files** if needed.
   - Click **Save and Export**.
3. The plugin exports canvas data as:
   - `canvas.rdf.json` (RDF/JSON format)
   - `canvas.ttl` (Turtle format)
   - `canvas.rdf` (RDF/XML format)
4. A notice confirms: "Exported RDF-enhanced docs with Semantic Weaver."
5. To preview the exported site locally:
   ```bash
   cd ~/my-docs
   mkdocs serve
   ```
   Open `http://localhost:8000` in a browser to view the site.

## Visualizing the RDF Graph

1. Open the command palette and select **Semantic Weaver: Open RDF Graph View**.
2. The RDF Graph View displays a Cytoscape visualization of the canvas’s RDF data, with nodes and edges labeled based on their URIs and predicates.
3. Nodes are styled in blue, and edges include arrows to indicate directionality.

## Solid Pod Integration (Optional)

If `@comunica/query-sparql-solid` and `@inrupt/solid-client-authn-browser` are installed:
1. Click the **Semantic Weaver: Solid Pod Login** ribbon icon.
2. Enter your **Solid Pod URL** (e.g., `https://joep.inrupt.net/`) and click **Login**.
3. Select a vault from the available Solid Pod containers.
4. Canvas RDF data will be saved to the Solid Pod’s `public/canvas/` directory during export if **Solid** is selected as the provider.
5. A notice confirms: "Published to Solid Pod by Semantic Weaver."

## Tips and Best Practices

- **Use Meaningful URIs**: Assign meaningful URIs to nodes and edges (e.g., `http://example.org/MyClass`) for better interoperability.
- **Leverage Default Ontologies**: Semantic Weaver includes RDFS, OWL, SKOS, FOAF, and Dublin Core by default. Manage additional namespaces in **Semantic Weaver: Manage RDF Namespaces and Ontology**.
- **Test SPARQL Queries**: Use simple queries to verify data before running complex ones.
- **Monitor Bundle Size**: If the plugin becomes slow, check the bundle size (`main.js`) and consider lazy-loading heavy dependencies like `cytoscape`.

For more details, see [Getting Started](getting-started.md) or other tutorials in the navigation.